<!DOCTYPE html>
<html>
  <head>
    <link rel="shortcut icon" href="http://embed.ly/static/favicon.ico">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js" type="text/javascript" ></script>
    <script type="text/javascript" src="../jquery.embedly.js"></script>
    <link rel="stylesheet" href="http://twitter.github.com/bootstrap/assets/css/bootstrap-1.2.0.min.css">
    <link rel="stylesheet" href="css/styles.css" />
    <title>Embedly jQuery - Autoplay</title>
    <style>
      .topbar{
        position:relative;
      }
      a.play{
        position:relative;
        width:500px;
        height: 280px;
        display:block;
        background-size: 100%;
        background-repeat: no-repeat;
      }
      a.play span{
        display:block;
        background-image:url(img/play_big.png);
        width:70px;
        height:70px;
        position:absolute;
        top: 105px;
        left: 215px;
      }
    </style>
  </head>
  <body>
    <div class="topbar">
      <div class="topbar-inner">
        <div class="container">
          <h3><a href="index.html">jQuery Preview</a></h3>
          <ul>
            <li><a href="status.html">Status</a></li>
            <li class="active"><a href="link.html">Link</a></li>
            <li><a href="large.html">Large Link</a></li>
            <li><a href="rich.html">Rich Link</a></li>
            <li><a href="multi.html">Multiple Inputs</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="row">
        <div class="span10 columns offset3">
          <h1>Autoplay</h1>
          <p>
            This demo allows users to replace a URL with a video, but does not
            load the swf right away. Instead we render an image that greatly
            reduces page load time. When the user wants to watch the video we
            then switch out the image for the video and auto play.
          </p>
          <h2 class="example">demo</h2>
          <div class="video"><a href="http://vimeo.com/18150336">Video</a></div>
          <h2 class="code">code</h2>
          <code>
<pre>
  $(document).ready(function() {
    //Replace the url with an image
    $(".video a").embedly({maxWidth: 500,
                       autoplay: true,
                       success : function(oembed, data){
                         //replace the a tag with an image
                         var d = $('&lt;a href="#" class="play"&gt;&lt;span&gt;&lt;/span&gt;&lt;/a&gt;')
                              .css('background-image', 'url('+oembed.thumbnail_url+')')
                              .data('oembed', oembed);
                         data.node.replaceWith(d);
                       }
                    });
    // When the user clicks play the video is loaded inline.
    $('a.play').live('click', function(e){
      e.preventDefault();
      $(this).replaceWith($(this).data('oembed').html);
    });
  });
</pre>
          </code>
          </ul>
        </div>
      </div>
      <div class="row">
        <div id="feed" class="span10 columns offset3">

        </div>
      </div>
      <div class="clear"></div>
    </div>
    <script type="text/javascript">
    $(document).ready(function() {
      $(".video a").embedly({maxWidth: 500,
                         autoplay: true,
                         key : 'internal',
                         success : function(oembed, data){
                           //replace the a tag with an image
                           var d = $('<a href="#" class="play"><span></span></a>')
                                .css('background-image', 'url('+oembed.thumbnail_url+')')
                                .data('oembed', oembed);
                           data.node.replaceWith(d);
                         }
                      });
      // When the user clicks play the video is loaded inline.
      $('a.play').live('click', function(e){
        e.preventDefault();
        $(this).replaceWith($(this).data('oembed').html);
      });
    });
    </script>
  </body>
</html>



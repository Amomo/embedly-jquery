(function(a){a.embedly=function(g,f,h){f=a.extend(true,a.fn.embedly.defaults,f);if(g!=null&&b(g,f)){d(g,f,h)}else{h(null)}};a.fn.embedly=function(f,g){f=a.extend(true,a.fn.embedly.defaults,f);g=(g!=null)?g:e;return this.each(function(){if(a(this).attr("href")){var j=a(this);var h=j.attr("href");function i(k){g(k,j,f)}if(h!=null&&b(h,f)){d(h,f,i)}else{i(null)}}else{a(this).find("A").each(function(l,n){n=a(n);var k=n.attr("href");function m(o){g(o,n,f)}if(k!=null&&b(k,f)){d(k,f,m)}else{m(null)}})}})};a.fn.embedly.defaults={maxWidth:null,maxHeight:null,method:"replace",addImageStyles:true,wrapElement:"div",className:"embed",urlRe:null};function e(f,h,g){if(f==null){return}switch(g.method){case"replace":h.replaceWith(f.code);break;case"after":h.after(f.code);break;case"afterParent":h.parent().after(f.code);break}}function c(f){for(var g in f){if(f.hasOwnProperty(g)){return false}}return true}function b(h,g){var f=/http:\/\/(.*youtube\.com\/watch.*|.*\.youtube\.com\/v\/.*|youtu\.be\/.*|www\.veoh\.com\/.*\/watch\/.*|.*justin\.tv\/.*|www\.ustream\.tv\/recorded\/.*|www\.ustream\.tv\/channel\/.*|qik\.com\/video\/.*|qik\.com\/.*|.*revision3\.com\/.*|.*\.dailymotion\.com\/video\/.*|.*\.dailymotion\.com\/.*\/video\/.*|www\.collegehumor\.com\/video:.*|www\.twitvid\.com\/.*|www\.break\.com\/.*\/.*|vids\.myspace\.com\/index\.cfm\?fuseaction=vids\.individual&videoid.*|www\.myspace\.com\/index\.cfm\?fuseaction=.*&videoid.*|www\.metacafe\.com\/watch\/.*|blip\.tv\/file\/.*|.*\.blip\.tv\/file\/.*|video\.google\.com\/videoplay\?.*|.*revver\.com\/video\/.*|video\.yahoo\.com\/watch\/.*\/.*|video\.yahoo\.com\/network\/.*|.*viddler\.com\/explore\/.*\/videos\/.*|liveleak\.com\/view\?.*|www\.liveleak\.com\/view\?.*|animoto\.com\/play\/.*|dotsub\.com\/view\/.*|.*yfrog\..*\/.*|tweetphoto\.com\/.*|www\.flickr\.com\/photos\/.*|.*twitpic\.com\/.*|.*imgur\.com\/.*|.*\.posterous\.com\/.*|post\.ly\/.*|twitgoo\.com\/.*|i.*\.photobucket\.com\/albums\/.*|gi.*\.photobucket\.com\/groups\/.*|phodroid\.com\/.*\/.*\/.*|xkcd\.com\/.*|www\.asofterworld\.com\/index\.php\?id=.*|www\.qwantz\.com\/index\.php\?comic=.*|23hq\.com\/.*\/photo\/.*|www\.23hq\.com\/.*\/photo\/.*|www\.whitehouse\.gov\/photos-and-video\/video\/.*|www\.whitehouse\.gov\/video\/.*|wh\.gov\/photos-and-video\/video\/.*|wh\.gov\/video\/.*|www\.hulu\.com\/watch.*|movieclips\.com\/watch\/.*\/.*\/|movieclips\.com\/watch\/.*\/.*\/.*\/.*|.*crackle\.com\/c\/.*|www\.fancast\.com\/.*\/videos|www\.funnyordie\.com\/videos\/.*|www\.vimeo\.com\/groups\/.*\/videos\/.*|www\.vimeo\.com\/.*|vimeo\.com\/groups\/.*\/videos\/.*|vimeo\.com\/.*|www\.ted\.com\/talks\/.*\.html.*|www\.ted\.com\/talks\/lang\/.*\/.*\.html.*|www\.ted\.com\/index\.php\/talks\/.*\.html.*|www\.ted\.com\/index\.php\/talks\/lang\/.*\/.*\.html.*|.*omnisio\.com\/.*|.*nfb\.ca\/film\/.*|www\.thedailyshow\.com\/watch\/.*|www\.thedailyshow\.com\/full-episodes\/.*|www\.thedailyshow\.com\/collection\/.*\/.*\/.*|movies\.yahoo\.com\/movie\/.*\/video\/.*|movies\.yahoo\.com\/movie\/.*\/info|movies\.yahoo\.com\/movie\/.*\/trailer|www\.colbertnation\.com\/the-colbert-report-collections\/.*|www\.colbertnation\.com\/full-episodes\/.*|www\.colbertnation\.com\/the-colbert-report-videos\/.*|www\.comedycentral\.com\/videos\/index\.jhtml\?.*|www\.theonion\.com\/video\/.*|theonion\.com\/video\/.*|wordpress\.tv\/.*\/.*\/.*\/.*\/|www\.traileraddict\.com\/trailer\/.*|www\.traileraddict\.com\/clip\/.*|www\.traileraddict\.com\/poster\/.*|www\.escapistmagazine\.com\/videos\/.*|soundcloud\.com\/.*|soundcloud\.com\/.*\/.*|soundcloud\.com\/.*\/sets\/.*|soundcloud\.com\/groups\/.*|www\.lala\.com\/#album\/.*|www\.lala\.com\/album\/.*|www\.lala\.com\/#song\/.*|www\.lala\.com\/song\/.*|.*amazon\..*\/gp\/product\/.*|.*amazon\..*\/.*\/dp\/.*|.*amazon\..*\/dp\/.*|.*amazon\..*\/o\/ASIN\/.*|.*amazon\..*\/gp\/offer-listing\/.*|.*amazon\..*\/.*\/ASIN\/.*|.*amazon\..*\/gp\/product\/images\/.*|www\.slideshare\.net\/.*\/.*|.*\.scribd\.com\/doc\/.*|screenr\.com\/.*|www\.5min\.com\/Video\/.*|www\.howcast\.com\/videos\/.*|www\.screencast\.com\/.*\/media\/.*|screencast\.com\/.*\/media\/.*|www\.screencast\.com\/t\/.*|screencast\.com\/t\/.*|www\.clearspring\.com\/widgets\/.*|my\.opera\.com\/.*\/albums\/show\.dml\?id=.*|my\.opera\.com\/.*\/albums\/showpic\.dml\?album=.*&picture=.*)/i;return(h.match(f)!=null&&(g.urlRe==null||h.match(g.urlRe)!=null))}function d(g,f,i){var h="http://api.embed.ly/v1/api/oembed?";h+="format=json&url="+escape(g);if(f.maxWidth!=null){h+="&maxwidth="+f.maxWidth}if(f.maxHeight!=null){h+="&maxheight="+f.maxHeight}h+="&callback=?";a.ajax({url:h,dataType:"json",success:function(l){if(c(l)||l.hasOwnProperty("error")){i(null)}var k="";if(f.wrapElement!=null){k+="<"+f.wrapElement+' class="'+f.className+'">'}switch(l.type){case"photo":var m=l.title?l.title:"";var j="";if(f.addImageStyles){if(f.maxWidth!=null){j+="max-width:"+f.maxWidth+"px; "}if(f.maxHeight!=null){j+="max-height:"+f.maxHeight+"px; "}}k+='<a href="'+g+'" target="_blank"><img style="'+j+'" src="'+l.url+'" alt="'+m+'"/></a>';break;case"video":k+=l.html;break;case"rich":k+=l.html;break;default:k+='<a href="'+g+'">'+(l.title!=null)?l.title:g+"</a>";break}if(f.wrapElement!=null){k+="</"+f.wrapElement+">"}l.code=k;i(l)},error:function(){i(null)}})}})(jQuery);